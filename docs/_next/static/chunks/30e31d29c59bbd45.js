(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5999,e=>{"use strict";var t=e.i(43476),a=e.i(71645);let r=[{name:"仕様理解",percentage:5/30,color:"text-blue-700",bgColor:"bg-blue-200"},{name:"基本実装",percentage:20/30,color:"text-green-700",bgColor:"bg-green-200"},{name:"テスト確認",percentage:2/30,color:"text-yellow-700",bgColor:"bg-yellow-200"},{name:"余裕時間",percentage:.1,color:"text-gray-700",bgColor:"bg-gray-200"}],l="coding-interview-timer",s=({onClick:e,color:a,children:r,className:l=""})=>(0,t.jsx)("button",{onClick:e,className:`px-4 py-2 ${{green:"bg-green-500 hover:bg-green-600",blue:"bg-blue-500 hover:bg-blue-600",orange:"bg-orange-500 hover:bg-orange-600",red:"bg-red-500 hover:bg-red-600",gray:"bg-gray-500 hover:bg-gray-600"}[a]} text-white font-semibold rounded-lg transition-colors ${l}`,children:r}),n=({label:e,value:a,onChange:r,max:l})=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"number",placeholder:e,min:"0",max:l,value:a,onChange:e=>r(e.target.value),className:"w-16 px-2 py-1 border rounded text-center"}),(0,t.jsx)("span",{children:e})]}),i=({label:e,value:a,color:r="text-gray-700"})=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:e}),(0,t.jsx)("div",{className:`text-sm ${r}`,children:a})]}),o=({segment:e,isActive:a,isPassed:r,elapsedTime:l,formatTime:s})=>{let n=Math.min(Math.max((l-e.startTime)/(e.endTime-e.startTime)*100,0),100);return(0,t.jsx)("div",{className:`p-3 rounded-lg border-2 transition-all min-h-16 ${a?`${e.bgColor} border-current ${e.color} shadow-lg scale-100`:r?"bg-gray-100 border-gray-300 text-gray-500 scale-95":"bg-white border-gray-200 text-gray-700 scale-95"}`,children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-semibold text-base mb-1 truncate",children:e.name}),(0,t.jsxs)("div",{className:"text-sm flex gap-4",children:[(0,t.jsxs)("span",{className:"truncate",children:[s(e.startTime)," - ",s(e.endTime)]}),(0,t.jsxs)("span",{className:"flex-shrink-0",children:["(",Math.round((e.endTime-e.startTime)/60),"分)"]})]})]}),(0,t.jsx)("div",{className:"w-32 ml-4 flex-shrink-0",children:(0,t.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:`h-full transition-all duration-500 ${a?"bg-current":r?"bg-gray-400":"bg-gray-300"}`,style:{width:`${l>=e.startTime&&l<=e.endTime?n:100*!!r}%`}})})})]})})},d=()=>{let{state:e,start:d,pause:c,resume:m,reset:u,setTime:g,setTotalDuration:x}=(()=>{let[e,t]=(0,a.useState)({isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:1800}),r=(0,a.useRef)(null),s=(0,a.useCallback)(()=>{try{let e=localStorage.getItem(l);if(e){let a=JSON.parse(e);if(a.totalDuration||(a.totalDuration=1800),a.isRunning&&!a.isPaused&&a.startTime){let e=Date.now(),r=Math.floor((e-a.startTime-a.pausedTime)/1e3);t({...a,elapsedTime:Math.min(r,a.totalDuration)})}else t(a)}}catch(e){console.error("Failed to load timer state from localStorage:",e)}},[]),n=(0,a.useCallback)(e=>{try{localStorage.setItem(l,JSON.stringify(e))}catch(e){console.error("Failed to save timer state to localStorage:",e)}},[]),i=(0,a.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused||!e.startTime)return e;let t=Math.min(Math.floor((Date.now()-e.startTime-e.pausedTime)/1e3),e.totalDuration),a={...e,elapsedTime:t};return t>=e.totalDuration&&(a.isRunning=!1),n(a),a})},[n]),o=(0,a.useCallback)(()=>{let a={isRunning:!0,isPaused:!1,elapsedTime:0,startTime:Date.now(),pausedTime:0,totalDuration:e.totalDuration};t(a),n(a)},[n,e.totalDuration]),d=(0,a.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused)return e;let t={...e,isPaused:!0};return n(t),t})},[n]),c=(0,a.useCallback)(()=>{t(e=>{if(!e.isRunning||!e.isPaused||!e.startTime)return e;let t=Date.now()-e.startTime-1e3*e.elapsedTime-e.pausedTime,a={...e,isPaused:!1,pausedTime:e.pausedTime+t};return n(a),a})},[n]),m=(0,a.useCallback)(()=>{let a={isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:e.totalDuration};t(a),n(a),r.current&&(clearInterval(r.current),r.current=null)},[n,e.totalDuration]),u=(0,a.useCallback)(e=>{t(t=>{let a,r=Math.max(0,Math.min(e,t.totalDuration));if(t.isRunning&&!t.isPaused&&t.startTime){let e=Date.now()-1e3*r-t.pausedTime;a={...t,elapsedTime:r,startTime:e}}else a={...t,elapsedTime:r};return n(a),a})},[n]),g=(0,a.useCallback)(e=>{t(t=>{let a={...t,totalDuration:e,elapsedTime:Math.min(t.elapsedTime,e)};return n(a),a})},[n]);return(0,a.useEffect)(()=>{s()},[s]),(0,a.useEffect)(()=>(e.isRunning&&!e.isPaused?r.current=setInterval(i,1e3):r.current&&(clearInterval(r.current),r.current=null),()=>{r.current&&(clearInterval(r.current),r.current=null)}),[e.isRunning,e.isPaused,i]),{state:e,start:o,pause:d,resume:c,reset:m,setTime:u,setTotalDuration:g}})(),[h,b]=(0,a.useState)(!1),[p,v]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[T,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(0),C=(0,a.useMemo)(()=>{var t;let a;return t=e.totalDuration,a=0,r.map(e=>{let r=Math.round(t*e.percentage),l={name:e.name,startTime:a,endTime:a+r,color:e.color,bgColor:e.bgColor,percentage:e.percentage};return a+=r,l})},[e.totalDuration]),D=e=>{let t=Math.floor(e/60);return`${t.toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`},k=()=>D(Math.max(0,e.totalDuration-e.elapsedTime)),P=C.find(t=>e.elapsedTime>=t.startTime&&e.elapsedTime<t.endTime)||null,R=Math.min(e.elapsedTime/e.totalDuration*100,100),S=e.elapsedTime>=e.totalDuration;return(0,t.jsx)("div",{className:"bg-gray-50 p-4 overflow-hidden",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4 min-h-36",children:[(0,t.jsxs)("div",{className:"text-center mb-3",children:[(0,t.jsx)("div",{className:"text-4xl font-mono font-bold text-gray-800 mb-2",children:D(e.elapsedTime)}),(0,t.jsxs)("div",{className:"text-lg text-gray-600 flex justify-center items-center gap-4",children:[(0,t.jsxs)("span",{children:["残り時間: ",k()]}),P&&(0,t.jsx)("span",{className:`font-semibold ${P.color}`,children:P.name})]}),S&&(0,t.jsx)("div",{className:"text-xl font-bold text-red-600 mt-1 animate-pulse",children:"時間終了！"})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-3 mb-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[e.isRunning?e.isPaused?(0,t.jsx)(s,{onClick:m,color:"blue",children:"再開"}):(0,t.jsx)(s,{onClick:c,color:"orange",children:"一時停止"}):(0,t.jsx)(s,{onClick:d,color:"green",children:"開始"}),(0,t.jsx)(s,{onClick:()=>b(!h),color:"gray",children:"全体時間設定"})]}),(0,t.jsx)("div",{className:"ml-4 pl-4 border-l border-gray-300",children:(0,t.jsx)("button",{onClick:()=>{y(!0),w(0)},className:"px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 hover:text-red-800 border border-red-300 hover:border-red-400 text-sm font-medium rounded-md transition-all duration-200 hover:shadow-md active:bg-red-300",title:"注意: タイマーをリセットします",children:"リセット"})})]}),T&&(0,t.jsx)("div",{className:"mt-3 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-700 font-semibold mb-2",children:"タイマーをリセットしますか？"}),(0,t.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>{0===N?w(1):1===N&&(u(),y(!1),w(0))},className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${0===N?"bg-red-500 hover:bg-red-600 text-white":"bg-red-600 hover:bg-red-700 text-white animate-pulse"}`,children:0===N?"はい、リセットします":"最終確認：実行する"}),(0,t.jsx)("button",{onClick:()=>{y(!1),w(0)},className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm font-medium rounded-md transition-all",children:"キャンセル"})]})]})}),h&&(0,t.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 mt-2",children:[(0,t.jsxs)("div",{className:"text-center mb-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"コーディングテスト全体の所要時間を設定"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["現在の設定: ",D(e.totalDuration)," (各セグメントの時間は自動計算されます)"]})]}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:[(0,t.jsx)(n,{label:"分",value:p,onChange:v,max:120}),(0,t.jsx)(n,{label:"秒",value:f,onChange:j,max:59}),(0,t.jsx)(s,{onClick:()=>{let e=60*(parseInt(p)||0)+(parseInt(f)||0);e>=300&&e<=7200&&(x(e),b(!1),v(""),j(""))},color:"blue",className:"rounded",children:"設定"}),(0,t.jsx)(s,{onClick:()=>b(!1),color:"gray",className:"rounded",children:"キャンセル"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 flex-1 min-h-0 overflow-hidden",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"進捗タイムライン"}),(0,t.jsxs)("div",{className:"relative mb-4",children:[(0,t.jsx)("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 to-green-400 transition-all duration-1000 ease-out",style:{width:`${R}%`}})}),(0,t.jsxs)("div",{className:"text-center mt-1 text-sm text-gray-600",children:["進捗: ",Math.round(R),"%"]})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-2 overflow-y-auto",children:C.map((a,r)=>{let l=P?.name===a.name,s=e.elapsedTime>a.endTime;return(0,t.jsx)(o,{segment:a,elapsedTime:e.elapsedTime,isActive:l,isPassed:s,formatTime:D},r)})}),(0,t.jsx)("div",{className:"mt-4 bg-gray-50 rounded-lg p-3 min-h-16",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center h-full items-center",children:[(0,t.jsx)(i,{label:"状態",value:e.isRunning?e.isPaused?"一時停止中":"実行中":"停止中",color:e.isRunning?e.isPaused?"text-orange-600":"text-green-600":"text-gray-600"}),(0,t.jsx)(i,{label:"経過時間",value:D(e.elapsedTime),color:"text-blue-600 font-mono"}),(0,t.jsx)(i,{label:"残り時間",value:k(),color:`font-mono ${e.totalDuration-e.elapsedTime<=300?"text-red-600":"text-green-600"}`})]})})]})]})})};function c(){return(0,t.jsx)(d,{})}e.s(["default",()=>c],5999)}]);