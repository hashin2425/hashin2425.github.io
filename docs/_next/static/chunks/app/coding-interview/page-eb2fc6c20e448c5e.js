(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{4850:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var r=a(5155),l=a(2115);let s=[{name:"仕様理解",percentage:5/30,color:"text-blue-700",bgColor:"bg-blue-200"},{name:"基本実装",percentage:20/30,color:"text-green-700",bgColor:"bg-green-200"},{name:"テスト確認",percentage:2/30,color:"text-yellow-700",bgColor:"bg-yellow-200"},{name:"余裕時間",percentage:.1,color:"text-gray-700",bgColor:"bg-gray-200"}],n=e=>{let t=0;return s.map(a=>{let r=Math.round(e*a.percentage),l={name:a.name,startTime:t,endTime:t+r,color:a.color,bgColor:a.bgColor,percentage:a.percentage};return t+=r,l})},i="coding-interview-timer",o=()=>{let[e,t]=(0,l.useState)({isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:1800}),a=(0,l.useRef)(null),r=(0,l.useCallback)(()=>{try{let e=localStorage.getItem(i);if(e){let a=JSON.parse(e);if(a.totalDuration||(a.totalDuration=1800),a.isRunning&&!a.isPaused&&a.startTime){let e=Date.now(),r=Math.floor((e-a.startTime-a.pausedTime)/1e3);t({...a,elapsedTime:Math.min(r,a.totalDuration)})}else t(a)}}catch(e){console.error("Failed to load timer state from localStorage:",e)}},[]),s=(0,l.useCallback)(e=>{try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Failed to save timer state to localStorage:",e)}},[]),n=(0,l.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused||!e.startTime)return e;let t=Math.min(Math.floor((Date.now()-e.startTime-e.pausedTime)/1e3),e.totalDuration),a={...e,elapsedTime:t};return t>=e.totalDuration&&(a.isRunning=!1),s(a),a})},[s]),o=(0,l.useCallback)(()=>{let a={isRunning:!0,isPaused:!1,elapsedTime:0,startTime:Date.now(),pausedTime:0,totalDuration:e.totalDuration};t(a),s(a)},[s,e.totalDuration]),d=(0,l.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused)return e;let t={...e,isPaused:!0};return s(t),t})},[s]),c=(0,l.useCallback)(()=>{t(e=>{if(!e.isRunning||!e.isPaused||!e.startTime)return e;let t=Date.now()-e.startTime-1e3*e.elapsedTime-e.pausedTime,a={...e,isPaused:!1,pausedTime:e.pausedTime+t};return s(a),a})},[s]),m=(0,l.useCallback)(()=>{let r={isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:e.totalDuration};t(r),s(r),a.current&&(clearInterval(a.current),a.current=null)},[s,e.totalDuration]),u=(0,l.useCallback)(e=>{t(t=>{let a,r=Math.max(0,Math.min(e,t.totalDuration));if(t.isRunning&&!t.isPaused&&t.startTime){let e=Date.now()-1e3*r-t.pausedTime;a={...t,elapsedTime:r,startTime:e}}else a={...t,elapsedTime:r};return s(a),a})},[s]),g=(0,l.useCallback)(e=>{t(t=>{let a={...t,totalDuration:e,elapsedTime:Math.min(t.elapsedTime,e)};return s(a),a})},[s]);return(0,l.useEffect)(()=>{r()},[r]),(0,l.useEffect)(()=>(e.isRunning&&!e.isPaused?a.current=setInterval(n,1e3):a.current&&(clearInterval(a.current),a.current=null),()=>{a.current&&(clearInterval(a.current),a.current=null)}),[e.isRunning,e.isPaused,n]),{state:e,start:o,pause:d,resume:c,reset:m,setTime:u,setTotalDuration:g}},d=e=>{let{onClick:t,color:a,children:l,className:s=""}=e;return(0,r.jsx)("button",{onClick:t,className:"px-4 py-2 ".concat({green:"bg-green-500 hover:bg-green-600",blue:"bg-blue-500 hover:bg-blue-600",orange:"bg-orange-500 hover:bg-orange-600",red:"bg-red-500 hover:bg-red-600",gray:"bg-gray-500 hover:bg-gray-600"}[a]," text-white font-semibold rounded-lg transition-colors ").concat(s),children:l})},c=e=>{let{label:t,value:a,onChange:l,max:s}=e;return(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"number",placeholder:t,min:"0",max:s,value:a,onChange:e=>l(e.target.value),className:"w-16 px-2 py-1 border rounded text-center"}),(0,r.jsx)("span",{children:t})]})},m=e=>{let{label:t,value:a,color:l="text-gray-700"}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:t}),(0,r.jsx)("div",{className:"text-sm ".concat(l),children:a})]})},u=e=>{let{segment:t,isActive:a,isPassed:l,elapsedTime:s,formatTime:n}=e,i=Math.min(Math.max((s-t.startTime)/(t.endTime-t.startTime)*100,0),100);return(0,r.jsx)("div",{className:"p-3 rounded-lg border-2 transition-all min-h-16 ".concat(a?"".concat(t.bgColor," border-current ").concat(t.color," shadow-lg scale-100"):l?"bg-gray-100 border-gray-300 text-gray-500 scale-95":"bg-white border-gray-200 text-gray-700 scale-95"),children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("div",{className:"font-semibold text-base mb-1 truncate",children:t.name}),(0,r.jsxs)("div",{className:"text-sm flex gap-4",children:[(0,r.jsxs)("span",{className:"truncate",children:[n(t.startTime)," - ",n(t.endTime)]}),(0,r.jsxs)("span",{className:"flex-shrink-0",children:["(",Math.round((t.endTime-t.startTime)/60),"分)"]})]})]}),(0,r.jsx)("div",{className:"w-32 ml-4 flex-shrink-0",children:(0,r.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full transition-all duration-500 ".concat(a?"bg-current":l?"bg-gray-400":"bg-gray-300"),style:{width:"".concat(s>=t.startTime&&s<=t.endTime?i:100*!!l,"%")}})})})]})})},g=()=>{let{state:e,start:t,pause:a,resume:s,reset:i,setTime:g,setTotalDuration:x}=o(),[h,b]=(0,l.useState)(!1),[p,v]=(0,l.useState)(""),[f,j]=(0,l.useState)(""),[T,N]=(0,l.useState)(!1),[y,w]=(0,l.useState)(0),C=(0,l.useMemo)(()=>n(e.totalDuration),[e.totalDuration]),D=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},k=()=>D(Math.max(0,e.totalDuration-e.elapsedTime)),P=C.find(t=>e.elapsedTime>=t.startTime&&e.elapsedTime<t.endTime)||null,M=Math.min(e.elapsedTime/e.totalDuration*100,100),S=e.elapsedTime>=e.totalDuration;return(0,r.jsx)("div",{className:"bg-gray-50 p-4 overflow-hidden",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto flex flex-col",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4 min-h-36",children:[(0,r.jsxs)("div",{className:"text-center mb-3",children:[(0,r.jsx)("div",{className:"text-4xl font-mono font-bold text-gray-800 mb-2",children:D(e.elapsedTime)}),(0,r.jsxs)("div",{className:"text-lg text-gray-600 flex justify-center items-center gap-4",children:[(0,r.jsxs)("span",{children:["残り時間: ",k()]}),P&&(0,r.jsx)("span",{className:"font-semibold ".concat(P.color),children:P.name})]}),S&&(0,r.jsx)("div",{className:"text-xl font-bold text-red-600 mt-1 animate-pulse",children:"時間終了！"})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-3 mb-2 flex-wrap",children:[(0,r.jsxs)("div",{className:"flex gap-3",children:[e.isRunning?e.isPaused?(0,r.jsx)(d,{onClick:s,color:"blue",children:"再開"}):(0,r.jsx)(d,{onClick:a,color:"orange",children:"一時停止"}):(0,r.jsx)(d,{onClick:t,color:"green",children:"開始"}),(0,r.jsx)(d,{onClick:()=>b(!h),color:"gray",children:"全体時間設定"})]}),(0,r.jsx)("div",{className:"ml-4 pl-4 border-l border-gray-300",children:(0,r.jsx)("button",{onClick:()=>{N(!0),w(0)},className:"px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 hover:text-red-800 border border-red-300 hover:border-red-400 text-sm font-medium rounded-md transition-all duration-200 hover:shadow-md active:bg-red-300",title:"注意: タイマーをリセットします",children:"リセット"})})]}),T&&(0,r.jsx)("div",{className:"mt-3 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-700 font-semibold mb-2",children:"タイマーをリセットしますか？"}),(0,r.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,r.jsx)("button",{onClick:()=>{0===y?w(1):1===y&&(i(),N(!1),w(0))},className:"px-4 py-2 text-sm font-medium rounded-md transition-all ".concat(0===y?"bg-red-500 hover:bg-red-600 text-white":"bg-red-600 hover:bg-red-700 text-white animate-pulse"),children:0===y?"はい、リセットします":"最終確認：実行する"}),(0,r.jsx)("button",{onClick:()=>{N(!1),w(0)},className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm font-medium rounded-md transition-all",children:"キャンセル"})]})]})}),h&&(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 mt-2",children:[(0,r.jsxs)("div",{className:"text-center mb-3",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"コーディングテスト全体の所要時間を設定"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["現在の設定: ",D(e.totalDuration)," (各セグメントの時間は自動計算されます)"]})]}),(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:[(0,r.jsx)(c,{label:"分",value:p,onChange:v,max:120}),(0,r.jsx)(c,{label:"秒",value:f,onChange:j,max:59}),(0,r.jsx)(d,{onClick:()=>{let e=60*(parseInt(p)||0)+(parseInt(f)||0);e>=300&&e<=7200&&(x(e),b(!1),v(""),j(""))},color:"blue",className:"rounded",children:"設定"}),(0,r.jsx)(d,{onClick:()=>b(!1),color:"gray",className:"rounded",children:"キャンセル"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 flex-1 min-h-0 overflow-hidden",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"進捗タイムライン"}),(0,r.jsxs)("div",{className:"relative mb-4",children:[(0,r.jsx)("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 to-green-400 transition-all duration-1000 ease-out",style:{width:"".concat(M,"%")}})}),(0,r.jsxs)("div",{className:"text-center mt-1 text-sm text-gray-600",children:["進捗: ",Math.round(M),"%"]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2 overflow-y-auto",children:C.map((t,a)=>{let l=(null==P?void 0:P.name)===t.name,s=e.elapsedTime>t.endTime;return(0,r.jsx)(u,{segment:t,elapsedTime:e.elapsedTime,isActive:l,isPassed:s,formatTime:D},a)})}),(0,r.jsx)("div",{className:"mt-4 bg-gray-50 rounded-lg p-3 min-h-16",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center h-full items-center",children:[(0,r.jsx)(m,{label:"状態",value:e.isRunning?e.isPaused?"一時停止中":"実行中":"停止中",color:e.isRunning?e.isPaused?"text-orange-600":"text-green-600":"text-gray-600"}),(0,r.jsx)(m,{label:"経過時間",value:D(e.elapsedTime),color:"text-blue-600 font-mono"}),(0,r.jsx)(m,{label:"残り時間",value:k(),color:"font-mono ".concat(e.totalDuration-e.elapsedTime<=300?"text-red-600":"text-green-600")})]})})]})]})})};function x(){return(0,r.jsx)(g,{})}},9812:(e,t,a)=>{Promise.resolve().then(a.bind(a,4850))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9812)),_N_E=e.O()}]);