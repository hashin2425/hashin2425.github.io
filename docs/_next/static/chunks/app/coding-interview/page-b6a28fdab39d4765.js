(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{59812:(e,t,a)=>{Promise.resolve().then(a.bind(a,74850))},74850:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var l=a(95155),r=a(12115);let s=[{name:"仕様理解",percentage:5/30,color:"text-blue-700",bgColor:"bg-blue-200"},{name:"基本実装",percentage:20/30,color:"text-green-700",bgColor:"bg-green-200"},{name:"テスト確認",percentage:2/30,color:"text-yellow-700",bgColor:"bg-yellow-200"},{name:"余裕時間",percentage:.1,color:"text-gray-700",bgColor:"bg-gray-200"}],n=e=>{let t=0;return s.map(a=>{let l=Math.round(e*a.percentage),r={name:a.name,startTime:t,endTime:t+l,color:a.color,bgColor:a.bgColor,percentage:a.percentage};return t+=l,r})},i="coding-interview-timer",o=()=>{let[e,t]=(0,r.useState)({isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:1800}),a=(0,r.useRef)(null),l=(0,r.useCallback)(()=>{try{let e=localStorage.getItem(i);if(e){let a=JSON.parse(e);if(a.totalDuration||(a.totalDuration=1800),a.isRunning&&!a.isPaused&&a.startTime){let e=Date.now(),l=Math.floor((e-a.startTime-a.pausedTime)/1e3);t({...a,elapsedTime:Math.min(l,a.totalDuration)})}else t(a)}}catch(e){console.error("Failed to load timer state from localStorage:",e)}},[]),s=(0,r.useCallback)(e=>{try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Failed to save timer state to localStorage:",e)}},[]),n=(0,r.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused||!e.startTime)return e;let t=Math.min(Math.floor((Date.now()-e.startTime-e.pausedTime)/1e3),e.totalDuration),a={...e,elapsedTime:t};return t>=e.totalDuration&&(a.isRunning=!1),s(a),a})},[s]),o=(0,r.useCallback)(()=>{let a={isRunning:!0,isPaused:!1,elapsedTime:0,startTime:Date.now(),pausedTime:0,totalDuration:e.totalDuration};t(a),s(a)},[s,e.totalDuration]),c=(0,r.useCallback)(()=>{t(e=>{if(!e.isRunning||e.isPaused)return e;let t={...e,isPaused:!0};return s(t),t})},[s]),d=(0,r.useCallback)(()=>{t(e=>{if(!e.isRunning||!e.isPaused||!e.startTime)return e;let t=Date.now()-e.startTime-1e3*e.elapsedTime-e.pausedTime,a={...e,isPaused:!1,pausedTime:e.pausedTime+t};return s(a),a})},[s]),m=(0,r.useCallback)(()=>{let l={isRunning:!1,isPaused:!1,elapsedTime:0,startTime:null,pausedTime:0,totalDuration:e.totalDuration};t(l),s(l),a.current&&(clearInterval(a.current),a.current=null)},[s,e.totalDuration]),u=(0,r.useCallback)(e=>{t(t=>{let a,l=Math.max(0,Math.min(e,t.totalDuration));if(t.isRunning&&!t.isPaused&&t.startTime){let e=Date.now()-1e3*l-t.pausedTime;a={...t,elapsedTime:l,startTime:e}}else a={...t,elapsedTime:l};return s(a),a})},[s]),g=(0,r.useCallback)(e=>{t(t=>{let a={...t,totalDuration:e,elapsedTime:Math.min(t.elapsedTime,e)};return s(a),a})},[s]);return(0,r.useEffect)(()=>{l()},[l]),(0,r.useEffect)(()=>(e.isRunning&&!e.isPaused?a.current=setInterval(n,1e3):a.current&&(clearInterval(a.current),a.current=null),()=>{a.current&&(clearInterval(a.current),a.current=null)}),[e.isRunning,e.isPaused,n]),{state:e,start:o,pause:c,resume:d,reset:m,setTime:u,setTotalDuration:g}},c=e=>{let{onClick:t,color:a,children:r,className:s=""}=e;return(0,l.jsx)("button",{onClick:t,className:"px-4 py-2 ".concat({green:"bg-green-500 hover:bg-green-600",blue:"bg-blue-500 hover:bg-blue-600",orange:"bg-orange-500 hover:bg-orange-600",red:"bg-red-500 hover:bg-red-600",gray:"bg-gray-500 hover:bg-gray-600"}[a]," text-white font-semibold rounded-lg transition-colors ").concat(s),children:r})},d=e=>{let{label:t,value:a,onChange:r,max:s}=e;return(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"number",placeholder:t,min:"0",max:s,value:a,onChange:e=>r(e.target.value),className:"w-16 px-2 py-1 border rounded text-center"}),(0,l.jsx)("span",{children:t})]})},m=e=>{let{label:t,value:a,color:r="text-gray-700"}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-700",children:t}),(0,l.jsx)("div",{className:"text-sm ".concat(r),children:a})]})},u=e=>{let{segment:t,isActive:a,isPassed:r,elapsedTime:s,formatTime:n}=e,i=Math.min(Math.max((s-t.startTime)/(t.endTime-t.startTime)*100,0),100);return(0,l.jsx)("div",{className:"p-3 rounded-lg border-2 transition-all min-h-16 ".concat(a?"".concat(t.bgColor," border-current ").concat(t.color," shadow-lg scale-100"):r?"bg-gray-100 border-gray-300 text-gray-500 scale-95":"bg-white border-gray-200 text-gray-700 scale-95"),children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"font-semibold text-base mb-1 truncate",children:t.name}),(0,l.jsxs)("div",{className:"text-sm flex gap-4",children:[(0,l.jsxs)("span",{className:"truncate",children:[n(t.startTime)," - ",n(t.endTime)]}),(0,l.jsxs)("span",{className:"flex-shrink-0",children:["(",Math.round((t.endTime-t.startTime)/60),"分)"]})]})]}),(0,l.jsx)("div",{className:"w-32 ml-4 flex-shrink-0",children:(0,l.jsx)("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full transition-all duration-500 ".concat(a?"bg-current":r?"bg-gray-400":"bg-gray-300"),style:{width:"".concat(s>=t.startTime&&s<=t.endTime?i:100*!!r,"%")}})})})]})})},g=()=>{let{state:e,start:t,pause:a,resume:s,reset:i,setTime:g,setTotalDuration:x}=o(),[h,b]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),T=(0,r.useMemo)(()=>n(e.totalDuration),[e.totalDuration]),N=e=>{let t=Math.floor(e/60);return"".concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},y=()=>N(Math.max(0,e.totalDuration-e.elapsedTime)),w=T.find(t=>e.elapsedTime>=t.startTime&&e.elapsedTime<t.endTime)||null,C=Math.min(e.elapsedTime/e.totalDuration*100,100),D=e.elapsedTime>=e.totalDuration;return(0,l.jsx)("div",{className:"bg-gray-50 p-4 overflow-hidden",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto flex flex-col",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4 min-h-36 max-h-40",children:[(0,l.jsxs)("div",{className:"text-center mb-3",children:[(0,l.jsx)("div",{className:"text-4xl font-mono font-bold text-gray-800 mb-2",children:N(e.elapsedTime)}),(0,l.jsxs)("div",{className:"text-lg text-gray-600 flex justify-center items-center gap-4",children:[(0,l.jsxs)("span",{children:["残り時間: ",y()]}),w&&(0,l.jsx)("span",{className:"font-semibold ".concat(w.color),children:w.name})]}),D&&(0,l.jsx)("div",{className:"text-xl font-bold text-red-600 mt-1 animate-pulse",children:"時間終了！"})]}),(0,l.jsxs)("div",{className:"flex justify-center gap-3 mb-2",children:[e.isRunning?e.isPaused?(0,l.jsx)(c,{onClick:s,color:"blue",children:"再開"}):(0,l.jsx)(c,{onClick:a,color:"orange",children:"一時停止"}):(0,l.jsx)(c,{onClick:t,color:"green",children:"開始"}),(0,l.jsx)(c,{onClick:i,color:"red",children:"リセット"}),(0,l.jsx)(c,{onClick:()=>b(!h),color:"gray",children:"全体時間設定"})]}),h&&(0,l.jsxs)("div",{className:"bg-gray-100 rounded-lg p-3 mt-2",children:[(0,l.jsxs)("div",{className:"text-center mb-3",children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"コーディングテスト全体の所要時間を設定"}),(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:["現在の設定: ",N(e.totalDuration)," (各セグメントの時間は自動計算されます)"]})]}),(0,l.jsxs)("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:[(0,l.jsx)(d,{label:"分",value:p,onChange:f,max:120}),(0,l.jsx)(d,{label:"秒",value:v,onChange:j,max:59}),(0,l.jsx)(c,{onClick:()=>{let e=60*(parseInt(p)||0)+(parseInt(v)||0);e>=300&&e<=7200&&(x(e),b(!1),f(""),j(""))},color:"blue",className:"rounded",children:"設定"}),(0,l.jsx)(c,{onClick:()=>b(!1),color:"gray",className:"rounded",children:"キャンセル"})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 flex-1 min-h-0 overflow-hidden",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4 text-center",children:"進捗タイムライン"}),(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)("div",{className:"w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-400 to-green-400 transition-all duration-1000 ease-out",style:{width:"".concat(C,"%")}})}),(0,l.jsxs)("div",{className:"text-center mt-1 text-sm text-gray-600",children:["進捗: ",Math.round(C),"%"]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 gap-2 overflow-y-auto",children:T.map((t,a)=>{let r=(null==w?void 0:w.name)===t.name,s=e.elapsedTime>t.endTime;return(0,l.jsx)(u,{segment:t,elapsedTime:e.elapsedTime,isActive:r,isPassed:s,formatTime:N},a)})}),(0,l.jsx)("div",{className:"mt-4 bg-gray-50 rounded-lg p-3 min-h-16",children:(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center h-full items-center",children:[(0,l.jsx)(m,{label:"状態",value:e.isRunning?e.isPaused?"一時停止中":"実行中":"停止中",color:e.isRunning?e.isPaused?"text-orange-600":"text-green-600":"text-gray-600"}),(0,l.jsx)(m,{label:"経過時間",value:N(e.elapsedTime),color:"text-blue-600 font-mono"}),(0,l.jsx)(m,{label:"残り時間",value:y(),color:"font-mono ".concat(e.totalDuration-e.elapsedTime<=300?"text-red-600":"text-green-600")})]})})]})]})})};function x(){return(0,l.jsx)(g,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(59812)),_N_E=e.O()}]);